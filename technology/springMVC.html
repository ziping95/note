<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SpringMVC | Ziping</title>
    <meta name="description" content="note">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.3e450b65.css" as="style"><link rel="preload" href="/assets/js/app.235633eb.js" as="script"><link rel="preload" href="/assets/js/2.f3b55463.js" as="script"><link rel="preload" href="/assets/js/3.04efa6eb.js" as="script"><link rel="prefetch" href="/assets/js/10.c3bc696d.js"><link rel="prefetch" href="/assets/js/11.3b722146.js"><link rel="prefetch" href="/assets/js/12.8e3e029f.js"><link rel="prefetch" href="/assets/js/13.d100d2eb.js"><link rel="prefetch" href="/assets/js/14.23088cee.js"><link rel="prefetch" href="/assets/js/15.24b7a8b1.js"><link rel="prefetch" href="/assets/js/16.23b6c92a.js"><link rel="prefetch" href="/assets/js/17.acb86f77.js"><link rel="prefetch" href="/assets/js/18.4d35ec93.js"><link rel="prefetch" href="/assets/js/19.1a210757.js"><link rel="prefetch" href="/assets/js/20.bbc18f39.js"><link rel="prefetch" href="/assets/js/4.cfa84d4d.js"><link rel="prefetch" href="/assets/js/5.cea2c218.js"><link rel="prefetch" href="/assets/js/6.c67f3e2d.js"><link rel="prefetch" href="/assets/js/7.20739a15.js"><link rel="prefetch" href="/assets/js/8.df3c8fe9.js"><link rel="prefetch" href="/assets/js/9.1a27df72.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3e450b65.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Ziping</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/technology/design.html" class="nav-link">技术沉淀</a></div><div class="nav-item"><a href="/linux/regex.html" class="nav-link">日常命令</a></div><div class="nav-item"><a href="/ans/serve-ans.html" class="nav-link">问题总结</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.sojson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Json格式化
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu/regex/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  正则
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue官网
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu/timestamp/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  时间戳转换
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://tool.chinaz.com/tools/unicode.aspx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Unicode编码转换
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://cli.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  二维码生成
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://alibaba.github.io/arthas/install-detail.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Arthas文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.iamwawa.cn/daxiaoxie.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  大小写转换
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.jq22.com/textDifference" target="_blank" rel="noopener noreferrer" class="nav-link external">
  文本差异对比
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/technology/design.html" class="nav-link">技术沉淀</a></div><div class="nav-item"><a href="/linux/regex.html" class="nav-link">日常命令</a></div><div class="nav-item"><a href="/ans/serve-ans.html" class="nav-link">问题总结</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.sojson.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Json格式化
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu/regex/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  正则
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue官网
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu/timestamp/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  时间戳转换
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://tool.chinaz.com/tools/unicode.aspx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Unicode编码转换
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://cli.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  二维码生成
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://alibaba.github.io/arthas/install-detail.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Arthas文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.iamwawa.cn/daxiaoxie.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  大小写转换
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://www.jq22.com/textDifference" target="_blank" rel="noopener noreferrer" class="nav-link external">
  文本差异对比
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technology/design.html" class="sidebar-link">设计模式</a></li><li><a href="/technology/component.html" class="sidebar-link">监听器、过滤器、拦截器</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>源码阅读</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technology/springMVC.html" class="active sidebar-link">SpringMVC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technology/springMVC.html#一、springmvc如何对请求进行解析？" class="sidebar-link">一、SpringMVC如何对请求进行解析？</a></li></ul></li><li><a href="/technology/SpringBoot.html" class="sidebar-link">SpringBoot</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端技术</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technology/css.html" class="sidebar-link">CSS样式</a></li><li><a href="/technology/vue.html" class="sidebar-link">Vue</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>代码整理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technology/httpClient.html" class="sidebar-link">HttpClient常见请求与传参方式</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="springmvc"><a href="#springmvc" class="header-anchor">#</a> SpringMVC</h1> <h2 id="一、springmvc如何对请求进行解析？"><a href="#一、springmvc如何对请求进行解析？" class="header-anchor">#</a> 一、SpringMVC如何对请求进行解析？</h2> <p>在SpringMVC中一个请求最终是由<code>servlet</code>接口中的<code>service</code>方法解析，从流程图上看，这个<code>dispatcherServlet</code>就是<code>servlet</code>的实现类
但该类并未直接实现<code>servlet</code>接口，而是通过多次继承间接了的实现了接口，其实现关系为</p> <p><strong>DispatcherServlet --&gt; FrameworkServlet --&gt; HttpServletBean --&gt; HttpServlet --&gt; GenericServlet</strong>，而<code>GenericServlet</code>最终实现了<code>Servlet</code>接口</p> <p><img src="/assets/img/DispatchServlet-extends.c25d983a.png" alt="">
由于我们已经知道处理请求的关键是<code>Servlet</code>中的<code>service</code>方法，因此我们直接去找这个方法，可以看到这个方法最后一次复写是在<code>HttpServlet</code>类中（注意<code>Servlet</code>中的<code>service</code>方法参数是<code>ServletRequest</code>和<code>ServletRequest</code>类型）</p> <p>在这个方法里Spring并没有对请求真正进行处理，只是将参数的类型强转成了<code>HttpServletRequest</code>、<code>HttpServletResponse</code>类型</p> <p><img src="/assets/img/HttpServlet-Service.c577ee7d.png" alt="">
然后继续调用<code>service(httpServletRequest, httpServletResponse)</code>方法，由于在<code>FrameworkServlet</code>复写了该方法，因此优先调用子类中的方法，在子类中只做了一件事，判断是否是<code>patch</code>类型的请求。</p> <p><img src="/assets/img/FrameworkServlet-Service.3f80d779.png" alt="">
若是，则不调用父类方法，直接开始解析请求，由于在debugger时是一个get请求，因此在这里调用了父类中的方法</p> <p><img src="/assets/img/HttpServlet-Service-1.cfc1dff3.png" alt="">
在父类中的对请求类型进行了判断，如果是<code>post</code>、<code>put</code>、<code>delete</code>则不作其他逻辑判断，直接调用<code>doPost</code>方法即可，如果是<code>get</code>请求，则通过判断<code>http</code>中的<code>if-modified-since</code>属性来决定是否对请求进行处理</p> <blockquote><p>在http中Last-Modified 与If-Modified-Since 都是用于记录页面最后修改时间的 HTTP 头信息。
注意,在这 Last-Modified 是由服务器往客户端发送的 HTTP 头，另一个 If-Modified-Since是由客户端往服务器发送的头。
再次请求本地存在的 cache 页面时，客户端会通过 If-Modified-Since 头将先前服务器端发过来的 Last-Modified 最后修改时间戳发送回去。
这是为了让服务器端进行验证，通过这个时间戳判断客户端的页面是否是最新的，如果不是最新的，则返回新的内容，如果是最新的，则 返回 304 告诉客户端其本地 cache 的页面是最新的，于是客户端就可以直接从本地加载页面了。
这样在网络上传输的数据就会大大减少，同时也减轻了服务器的负担。</p></blockquote> <p>判断后调用<code>FrameworkServlet</code>的<code>doGat</code>方法，在这个方法中只有一句话</p> <p><img src="/assets/img/FrameworkServlet-doGet.6a930fc8.png" alt="">
点进去继续看，在这个方法中，初始化了一些属性值这里我们不过多关注，只看主流程，真正处理请求的是<code>doService(request, response)</code>方法</p> <p><img src="/assets/img/FrameworkServlet-processRequest.67391d1b.png" alt="">
而在<code>doService</code>中我们发现真正对请求进行处理的是<code>doDispatch(request, response)</code>方法</p> <p><img src="/assets/img/DispatcherServlet-doDisPatch.48b5a394.png" alt="">
从名称上看开始对请求进行分发了，其中两个方法比较关键，一个是<code>getHandler</code>，获取当前的请求的处理器，一个是获取处理器对应的适配器</p> <p>我们先来看是如何获取的Handler的，在<code>getHandler</code>方法中，将遍历已经初始化好的handlerMapping</p> <p><img src="/assets/img/HandlerMapping.07b709db.png" alt="">
在这里面有一个<code>RequestMappingHandlerMapping</code>，这个就是实际负责将带有<code>@RequestMapping</code>注解的方法，添加到这个映射关系中去</p> <p><code>mapping.getHandler</code>在这个方法中，通过往下调用，最终会调用到<code>AbstractHandlerMethodMapping</code>这个类中的<code>addMatchingMappings</code>方法
通过debugger可以看到，Spring将所有的URL映射关系全部放入一个map中，在这个方法中将当前请求路径对应的bean拿到</p> <p><img src="/assets/img/addMatchingMappings.dad3e33d.png" alt="">
拿到bean后，我们返回到<code>getHandler</code>方法，继续往下走，发现这个方法<code>getHandlerExecutionChain</code>返回了一个<code>HandlerExecutionChain</code>，在这个方法中，只做了一件事，就是找到这个URL匹配的拦截器
将其放入处理器执行链，其由<code>controller</code>和拦截器组成</p> <p><img src="/assets/img/getHandlerExecutionChain.c5bc6427.png" alt="">
在拿到这个处理器执行链后，<code>getHandler</code>方法可以基本完成了他的使命，返回到<code>DisPatcherServlet</code>中
代码继续往下走，这里可以看到如果没有拿到对应的处理器，则这个请求开始返回404</p> <p><img src="/assets/img/notFound.cecc4f93.png" alt="">
接下来我们在关注<code>getHandlerAdapter</code>这个方法，这个方法是获取处理器对应的适配器，在这个方法中依旧遍历已经初始化好的适配器，显然这里使用<code>RequestMappingHandlerAdapter</code></p> <p><img src="/assets/img/getHandlerAdapter.51b8cf5d.png" alt="">
在拿到适配器后程序继续向下走，直到看到这样一段代码，这里显然开始真正执行请求了</p> <p><img src="/assets/img/invoke-handler.79580e1b.png" alt="">
在这个方法中通过一层一层调用最终执行到这样一个方法，在这里进行反射调用，执行了最终<code>controller</code>方法，我们定义的<code>controller</code>流程执行完了</p> <p><img src="/assets/img/doInvoke.9e466682.png" alt="">
最后通过<code>mappedHandler.triggerAfterCompletion()</code>方法完成拦截器中的<code>afterCompletion</code>方法</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/technology/component.html" class="prev">监听器、过滤器、拦截器</a></span> <span class="next"><a href="/technology/SpringBoot.html">SpringBoot</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.235633eb.js" defer></script><script src="/assets/js/2.f3b55463.js" defer></script><script src="/assets/js/3.04efa6eb.js" defer></script>
  </body>
</html>
